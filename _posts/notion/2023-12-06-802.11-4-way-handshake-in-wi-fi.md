---
layout: post
comments: true
date: 2023-12-06
title: "802.11 4-WAY HANDSHAKE in Wi-Fi" 
tags:
  - wifi
  - networking
 
categories:
  - wifi

---

Certainly! The 4-way handshake is a key process in the establishment of a secure connection between a client device (such as a laptop or smartphone) and a Wi-Fi access point. It's primarily used in WPA2-PSK (Wi-Fi Protected Access 2 with Pre-Shared Key) and WPA3-Personal security protocols. Here's how it works, along with an overview of the authentication and association process:


## State Machine of a client joining a 802.11 AP

1. Unauthenticated and Unassociated
2. Authenticated and Unassociated
3. Authenticated and Associated
4. Exchange Keys using 4WHS

> Authentication step has nothing related to security or password. It just verifies if the STA is a 802.11 STA and can talk to AP.


{: .prompt-tip }


## Authentication and Association Process:


### Probe request/Response

- The client device sends a Probe Request frame to discover nearby Wi-Fi networks.
- The access point responds with a Probe Response frame, providing information about the network, including its SSID (Service Set Identifier) and supported security protocols.

### Authentication

- The client device sends a Probe Request frame to discover nearby Wi-Fi networks.
- The access point responds with a Probe Response frame, providing information about the network, including its SSID (Service Set Identifier) and supported security protocols.

### Association

- The client sends an Association Request frame to the access point, specifying the desired SSID and other relevant information.
- The access point responds with an Association Response frame, acknowledging the client's request and providing information such as the assigned IP address.

## 4-way Handshake


### Purpose

- Key Exchange: Facilitates exchange of cryptographic keys between client and AP, which are essential for encrypted data transmission.
- Mutual Authentication: Allows both client and AP to authenticate each otherâ€™s identities.

### Overview


The exchange happen through 4 messages usually referred to as M1, M2, M3, M4.


| Message | From   | To     |
| ------- | ------ | ------ |
| 1       | AP     | Client |
| 2       | Client | AP     |
| 3       | AP     | Client |
| 4       | Client | AP     |

undefined